!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["html-to-speech"]={})}(this,(function(e){"use strict";const t="  ᠎             　",r=" \t\r\n\r\n\v\f​‌‍‎‏\v\u2028\u2029\ufeff‭"+t,n=new RegExp(`^[${r}]+`),o=new RegExp(`[${r}]+$`),l=new RegExp("[\v\f​‌‍‎‏\v\u2028\u2029\ufeff‭]+","g"),s=new RegExp(`[${t}]+`,"g");class c{static isHtmlElement(e){if(null===e)return!1;try{return e instanceof Element||e instanceof Document}catch(t){return"object"==typeof e&&e.nodeType===Node.ELEMENT_NODE&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}static isHostMethod(e,t){if(!e)return!1;const r=typeof e[t];return this.reUnknown.test(r)||this.reMethod.test(r)&&Boolean(e)||!1}static stringToHTML(e){let t;if(c.isHostMethod(globalThis,"DOMParser")){return t=(new DOMParser).parseFromString(e,"text/html"),t}return t=document.implementation.createHTMLDocument("New Document"),t.body.innerHTML=e,t}static contains(e,t){return!1!==c.isHtmlElement(e)&&(c.isHostMethod(e,"contains")?e.contains(t):Boolean(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING))}static querySelectorAllExclude(e,t,r){const n=t?t.querySelectorAll(e):document.querySelectorAll(e);let o=[];Array.isArray(r)?o=r:r&&(o=[r]);let l=Array.from(n);if(0===n.length)return l;return l=l.filter((e=>{const t=(null==e?void 0:e.proxiedNode)||e;return-1===o.findIndex((e=>t===e))})),l}static safeTrim(e){return e.replace(n,"").replace(o,"").replace(new RegExp("\t","g"),"").replace(new RegExp("\r\n","g"),"\n").replace(new RegExp("\r","g"),"\n").replace(l,"").replace(s,"").trim()}}var i;c.reMethod=/^(function|object)$/,c.reUnknown=/^unknown$/,function(e){e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.TEXT_NODE=3]="TEXT_NODE"}(i||(i={}));e.HtmlToSpeech=class{constructor(){}getSelectedOption(e){const t=e.options,r=t.length-1;for(let e=0;e<r;e+=1)if(t[e].selected)return t[e];return null}getTextFromNode(e){let t,r="";if(e.nodeType===i.TEXT_NODE)return e.data;switch(e.nodeName.toLowerCase()){case"img":case"area":e.alt&&e.alt.length&&(r+=e.alt);break;case"input":case"output":case"textarea":"email"===e.type||"number"===e.type||"text"===e.type||"textarea"===e.type?r+=e.value:"image"===e.type&&"string"==typeof e.alt&&e.alt.length&&(r+=e.alt);break;case"select":t=this.getSelectedOption(e),r+=t.textContent}return r}processHtml(e,t){const r=e,n=[];if(!1===c.isHtmlElement(r))return"";const o={acceptNode:e=>{for(const r of t)if(r===e)return NodeFilter.FILTER_REJECT;return NodeFilter.FILTER_ACCEPT}},l=document.createTreeWalker(r,NodeFilter.SHOW_ALL,o);let s;for(;l.nextNode();)s=c.safeTrim(this.getTextFromNode(l.currentNode)),0!==s.length&&(!1===s.endsWith(".")&&(s+="."),n.push(s));return n.join(" ")}convert(e,t=[]){let r="",n=[];n="string"==typeof e?Array.from(document.querySelectorAll(e)):Array.isArray(e)?e:[e];let o=[];Array.isArray(t)?o=t:t&&(o=[t]);n=n.filter((e=>{const t=(null==e?void 0:e.proxiedNode)||e;return-1===o.findIndex((e=>t===e))}));for(const e of n)r+=this.processHtml(e,o);return r}}}));
